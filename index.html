<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- META –¢–ï–ì–ò -->
    <meta name="description" content="EnglishMaster - –ø—Ä–µ–º–∏—É–º –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —Å 8 —Ç–µ–º–∞–º–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è">
    <meta name="theme-color" content="#6366f1">
    
    <title>EnglishMaster | 8 —Ç–µ–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è + –ø—Ä–µ–º–∏—É–º –¥–∏–∑–∞–π–Ω</title>
    
    <!-- –®–†–ò–§–¢–´ -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* ===============================================
           –ü–†–ï–ú–ò–£–ú –°–ò–°–¢–ï–ú–ê –¢–ï–ú - 8 –£–ù–ò–ö–ê–õ–¨–ù–´–• –°–¢–ò–õ–ï–ô
           =============================================== */
        
        :root {
            /* ---------- –°–í–ï–¢–õ–ê–Ø –¢–ï–ú–ê (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ---------- */
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-card: #ffffff;
            --bg-hover: #f1f5f9;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-tertiary: #64748b;
            --border-color: #e2e8f0;
            --border-focus: #6366f1;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --glass-bg: rgba(255, 255, 255, 0.9);
            --primary-50: #eef2ff;
            --primary-100: #e0e7ff;
            --primary-200: #c7d2fe;
            --primary-300: #a5b4fc;
            --primary-400: #818cf8;
            --primary-500: #6366f1;
            --primary-600: #4f46e5;
            --primary-700: #4338ca;
            --success-50: #f0fdf4;
            --success-500: #22c55e;
            --warning-50: #fefce8;
            --warning-500: #eab308;
            --error-50: #fef2f2;
            --error-500: #ef4444;
        }
        
        /* ---------- –¢–Å–ú–ù–ê–Ø –¢–ï–ú–ê (—ç–ª–µ–≥–∞–Ω—Ç–Ω–∞—è) ---------- */
        [data-theme="dark"] {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #1e293b;
            --bg-hover: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-tertiary: #94a3b8;
            --border-color: #334155;
            --border-focus: #818cf8;
            --glass-bg: rgba(15, 23, 42, 0.9);
            --primary-50: #1e1b4b;
            --primary-500: #818cf8;
            --primary-600: #6366f1;
            --success-50: #14532d;
            --warning-50: #713f12;
            --error-50: #7f1d1d;
        }
        
        /* ---------- –°–ò–ù–Ø–Ø –¢–ï–ú–ê (–æ–∫–µ–∞–Ω) ---------- */
        [data-theme="blue"] {
            --bg-primary: #eff6ff;
            --bg-secondary: #dbeafe;
            --bg-card: #ffffff;
            --bg-hover: #bfdbfe;
            --text-primary: #1e3a8a;
            --text-secondary: #2563eb;
            --text-tertiary: #3b82f6;
            --border-color: #93c5fd;
            --border-focus: #2563eb;
            --primary-500: #3b82f6;
            --primary-600: #2563eb;
            --glass-bg: rgba(239, 246, 255, 0.9);
        }
        
        /* ---------- –ó–ï–õ–Å–ù–ê–Ø –¢–ï–ú–ê (–ø—Ä–∏—Ä–æ–¥–∞) ---------- */
        [data-theme="green"] {
            --bg-primary: #f0fdf4;
            --bg-secondary: #dcfce7;
            --bg-card: #ffffff;
            --bg-hover: #bbf7d0;
            --text-primary: #14532d;
            --text-secondary: #166534;
            --text-tertiary: #15803d;
            --border-color: #86efac;
            --border-focus: #16a34a;
            --primary-500: #22c55e;
            --primary-600: #16a34a;
            --glass-bg: rgba(240, 253, 244, 0.9);
        }
        
        /* ---------- –§–ò–û–õ–ï–¢–û–í–ê–Ø –¢–ï–ú–ê (–∫–æ—Å–º–æ—Å) ---------- */
        [data-theme="purple"] {
            --bg-primary: #faf5ff;
            --bg-secondary: #f3e8ff;
            --bg-card: #ffffff;
            --bg-hover: #e9d5ff;
            --text-primary: #581c87;
            --text-secondary: #6b21a8;
            --text-tertiary: #7e22ce;
            --border-color: #d8b4fe;
            --border-focus: #9333ea;
            --primary-500: #a855f7;
            --primary-600: #9333ea;
            --glass-bg: rgba(250, 245, 255, 0.9);
        }
        
        /* ---------- –†–û–ó–û–í–ê–Ø –¢–ï–ú–ê (—Ä–æ–º–∞–Ω—Ç–∏–∫–∞) ---------- */
        [data-theme="pink"] {
            --bg-primary: #fdf2f8;
            --bg-secondary: #fce7f3;
            --bg-card: #ffffff;
            --bg-hover: #fbcfe8;
            --text-primary: #831843;
            --text-secondary: #9d174d;
            --text-tertiary: #be185d;
            --border-color: #f9a8d4;
            --border-focus: #db2777;
            --primary-500: #ec4899;
            --primary-600: #db2777;
            --glass-bg: rgba(253, 242, 248, 0.9);
        }
        
        /* ---------- –û–†–ê–ù–ñ–ï–í–ê–Ø –¢–ï–ú–ê (—ç–Ω–µ—Ä–≥–∏—è) ---------- */
        [data-theme="orange"] {
            --bg-primary: #fff7ed;
            --bg-secondary: #ffedd5;
            --bg-card: #ffffff;
            --bg-hover: #fed7aa;
            --text-primary: #7c2d12;
            --text-secondary: #9a3412;
            --text-tertiary: #c2410c;
            --border-color: #fdba74;
            --border-focus: #ea580c;
            --primary-500: #f97316;
            --primary-600: #ea580c;
            --glass-bg: rgba(255, 247, 237, 0.9);
        }
        
        /* ---------- –ú–Ø–¢–ù–ê–Ø –¢–ï–ú–ê (—Å–≤–µ–∂–µ—Å—Ç—å) ---------- */
        [data-theme="mint"] {
            --bg-primary: #f0fdfa;
            --bg-secondary: #ccfbf1;
            --bg-card: #ffffff;
            --bg-hover: #99f6e4;
            --text-primary: #134e4a;
            --text-secondary: #0f766e;
            --text-tertiary: #0d9488;
            --border-color: #5eead4;
            --border-focus: #14b8a6;
            --primary-500: #14b8a6;
            --primary-600: #0d9488;
            --glass-bg: rgba(240, 253, 250, 0.9);
        }
        
        /* ---------- –ö–û–†–ò–ß–ù–ï–í–ê–Ø –¢–ï–ú–ê (–≤–∏–Ω—Ç–∞–∂) ---------- */
        [data-theme="brown"] {
            --bg-primary: #faf7f2;
            --bg-secondary: #e7e2d9;
            --bg-card: #ffffff;
            --bg-hover: #d6ccc2;
            --text-primary: #5c3e2d;
            --text-secondary: #7f5b3e;
            --text-tertiary: #9c7c5d;
            --border-color: #c4b5a0;
            --border-focus: #8b5a2b;
            --primary-500: #b45309;
            --primary-600: #92400e;
            --glass-bg: rgba(250, 247, 242, 0.9);
        }
        
        /* ===============================================
           –û–°–¢–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò (–ò–ó –ü–†–ï–î–´–î–£–©–ï–ô –í–ï–†–°–ò–ò)
           –í–°–Å –†–ê–ë–û–¢–ê–ï–¢ –ò–î–ï–ù–¢–ò–ß–ù–û
           =============================================== */
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s ease, color 0.3s ease;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 24px;
            width: 100%;
        }
        
        /* –ö–ù–û–ü–ö–ò */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 24px;
            font-size: 15px;
            font-weight: 600;
            border-radius: 12px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
            white-space: nowrap;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            color: white;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary-500);
            color: var(--primary-500);
        }
        
        .btn-outline:hover {
            background: var(--primary-500);
            color: white;
        }
        
        .btn-block {
            width: 100%;
        }
        
        .btn-lg {
            padding: 16px 32px;
            font-size: 16px;
        }
        
        /* –ò–ù–ü–£–¢–´ */
        .input {
            width: 100%;
            padding: 14px 18px;
            font-size: 15px;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            transition: all 0.2s ease;
        }
        
        .input:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }
        
        /* –ö–ê–†–¢–û–ß–ö–ò */
        .card {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            padding: 24px;
            transition: all 0.2s ease;
        }
        
        .card:hover {
            border-color: var(--primary-500);
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px var(--shadow-color);
        }
        
        /* –ë–ï–ô–î–ñ–ò */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 6px 14px;
            font-size: 13px;
            font-weight: 600;
            border-radius: 9999px;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            letter-spacing: 0.3px;
        }
        
        .badge-primary {
            background: var(--primary-50);
            color: var(--primary-700);
        }
        
        /* –ü–†–û–ì–†–ï–°–° */
        .progress {
            width: 100%;
            height: 8px;
            background: var(--border-color);
            border-radius: 9999px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-500), var(--primary-600));
            border-radius: 9999px;
            transition: width 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        /* –≠–ö–†–ê–ù –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò */
        .auth-screen {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            position: relative;
            overflow: hidden;
        }
        
        .auth-card {
            background: var(--bg-card);
            border-radius: 24px;
            padding: 40px;
            width: 100%;
            max-width: 460px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            position: relative;
            z-index: 10;
            animation: fadeInUp 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .auth-header {
            text-align: center;
            margin-bottom: 32px;
        }
        
        .auth-logo {
            font-size: 48px;
            margin-bottom: 16px;
            animation: float 3s infinite ease-in-out;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .auth-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 32px;
            background: var(--bg-secondary);
            padding: 6px;
            border-radius: 16px;
        }
        
        .auth-tab {
            flex: 1;
            padding: 12px;
            border: none;
            background: transparent;
            border-radius: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.15s ease;
        }
        
        .auth-tab.active {
            background: var(--bg-card);
            color: var(--primary-600);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        /* –•–ï–î–ï–† */
        .header {
            position: sticky;
            top: 0;
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            border-bottom: 2px solid var(--border-color);
            height: 80px;
            display: flex;
            align-items: center;
            z-index: 100;
        }
        
        .header-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 24px;
            font-weight: 800;
            cursor: pointer;
        }
        
        .logo-icon {
            animation: float 3s infinite ease-in-out;
        }
        
        .logo-text {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* –ù–ê–í–ò–ì–ê–¶–ò–Ø */
        .nav {
            display: flex;
            gap: 4px;
            background: var(--bg-secondary);
            padding: 4px;
            border-radius: 16px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 12px;
            color: var(--text-secondary);
            font-weight: 600;
            transition: all 0.15s ease;
            cursor: pointer;
        }
        
        .nav-link:hover {
            background: var(--bg-hover);
            color: var(--primary-500);
        }
        
        .nav-link.active {
            background: var(--bg-card);
            color: var(--primary-500);
            box-shadow: 0 4px 6px -1px var(--shadow-color);
        }
        
        /* –ú–ï–ù–Æ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø */
        .user-menu {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .user-avatar {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            border-radius: 9999px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .user-avatar:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 15px -3px var(--shadow-color);
        }
        
        /* –î–†–û–ü–î–ê–£–ù */
        .dropdown-menu {
            position: absolute;
            top: calc(100% + 10px);
            right: 0;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 16px;
            padding: 8px;
            min-width: 240px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            display: none;
            z-index: 1000;
        }
        
        .dropdown-menu.show {
            display: block;
            animation: fadeInDown 0.2s ease;
        }
        
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: 12px;
            color: var(--text-primary);
            transition: all 0.15s ease;
            cursor: pointer;
        }
        
        .dropdown-item:hover {
            background: var(--bg-hover);
            color: var(--primary-500);
        }
        
        /* ===============================================
           –ù–û–í–ê–Ø –°–ï–ö–¶–ò–Ø: –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø –¢–ï–ú–ê–ú–ò
           =============================================== */
        
        .theme-panel {
            position: fixed;
            right: 20px;
            bottom: 20px;
            z-index: 9999;
        }
        
        .theme-button {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            border: none;
            border-radius: 9999px;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .theme-button:hover {
            transform: scale(1.1) rotate(90deg);
        }
        
        .theme-menu {
            position: absolute;
            bottom: 80px;
            right: 0;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 20px;
            padding: 20px;
            width: 300px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            display: none;
        }
        
        .theme-menu.show {
            display: block;
            animation: fadeInUp 0.3s ease;
        }
        
        .theme-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }
        
        .theme-option {
            padding: 12px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }
        
        .theme-option:hover {
            transform: translateY(-2px);
        }
        
        .theme-option.active {
            border: 3px solid var(--primary-500);
            box-shadow: 0 10px 15px -3px var(--shadow-color);
        }
        
        .theme-preview {
            width: 100%;
            height: 60px;
            border-radius: 8px;
            margin-bottom: 8px;
        }
        
        /* ===============================================
           –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨
           =============================================== */
        
        @media (max-width: 768px) {
            .nav .nav-text {
                display: none;
            }
            
            .nav-link {
                padding: 12px;
            }
            
            .theme-menu {
                width: 280px;
                right: 0;
            }
        }
        
        /* –£–¢–ò–õ–ò–¢–´ */
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-2 { gap: 8px; }
        .gap-3 { gap: 12px; }
        .gap-4 { gap: 16px; }
        .mt-4 { margin-top: 16px; }
        .mb-2 { margin-bottom: 8px; }
        .text-center { text-align: center; }
        .w-full { width: 100%; }
    </style>
</head>
<body>

<!-- ===============================================
   –≠–ö–†–ê–ù –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò
   =============================================== -->
<div id="authScreen" class="auth-screen">
    <div class="auth-card">
        <div class="auth-header">
            <div class="auth-logo">üéØ</div>
            <h1 style="font-size: 32px; margin-bottom: 8px; background: linear-gradient(135deg, var(--primary-500), var(--primary-600)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                EnglishMaster
            </h1>
            <p class="text-secondary">8 —Ç–µ–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è ‚Ä¢ –ü—Ä–µ–º–∏—É–º –¥–∏–∑–∞–π–Ω</p>
        </div>
        
        <div class="auth-tabs">
            <button class="auth-tab active" onclick="Auth.showLogin()">–í—Ö–æ–¥</button>
            <button class="auth-tab" onclick="Auth.showRegister()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
        </div>
        
        <!-- –§–û–†–ú–ê –í–•–û–î–ê -->
        <div id="loginForm" class="auth-form active">
            <form onsubmit="Auth.login(event)">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">
                        Email –∏–ª–∏ –ª–æ–≥–∏–Ω
                    </label>
                    <input type="text" id="loginUsername" class="input" 
                           placeholder="example@mail.com" required>
                </div>
                
                <div style="margin-bottom: 24px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">
                        –ü–∞—Ä–æ–ª—å
                    </label>
                    <input type="password" id="loginPassword" class="input" 
                           placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                </div>
                
                <button type="submit" class="btn btn-primary btn-block btn-lg">
                    –í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç
                </button>
            </form>
        </div>
        
        <!-- –§–û–†–ú–ê –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò -->
        <div id="registerForm" class="auth-form">
            <form onsubmit="Auth.register(event)">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">
                        –í–∞—à–µ –∏–º—è
                    </label>
                    <input type="text" id="registerName" class="input" 
                           placeholder="–ê–ª–µ–∫—Å–∞–Ω–¥—Ä" required>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">
                        Email
                    </label>
                    <input type="email" id="registerEmail" class="input" 
                           placeholder="example@mail.com" required>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">
                        –õ–æ–≥–∏–Ω
                    </label>
                    <input type="text" id="registerUsername" class="input" 
                           placeholder="alex123" required>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">
                        –ü–∞—Ä–æ–ª—å
                    </label>
                    <input type="password" id="registerPassword" class="input" 
                           placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                </div>
                
                <div style="margin-bottom: 24px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">
                        –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
                    </label>
                    <input type="password" id="registerConfirmPassword" class="input" 
                           placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                </div>
                
                <button type="submit" class="btn btn-primary btn-block btn-lg">
                    –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç
                </button>
            </form>
        </div>
    </div>
</div>

<!-- ===============================================
   –û–°–ù–û–í–ù–û–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–ï
   =============================================== -->
<div id="appContainer" class="app-container">

    <!-- –•–ï–î–ï–† -->
    <header class="header">
        <div class="container header-container">
            <div class="logo" onclick="App.navigate('home')">
                <span class="logo-icon">üéØ</span>
                <span class="logo-text">EnglishMaster</span>
                <span id="headerLevelBadge" class="badge badge-primary">–£—Ä–æ–≤–µ–Ω—å 1</span>
            </div>
            
            <nav class="nav">
                <div class="nav-link active" onclick="App.navigate('home')">
                    <span>üìö</span>
                    <span class="nav-text">–£—Ä–æ–∫–∏</span>
                </div>
                <div class="nav-link" onclick="App.navigate('tests')">
                    <span>üìù</span>
                    <span class="nav-text">–¢–µ—Å—Ç—ã</span>
                </div>
                <div class="nav-link" onclick="App.navigate('cards')">
                    <span>üÉè</span>
                    <span class="nav-text">–ö–∞—Ä—Ç–æ—á–∫–∏</span>
                </div>
                <div class="nav-link" onclick="App.navigate('profile')">
                    <span>üë§</span>
                    <span class="nav-text">–ü—Ä–æ—Ñ–∏–ª—å</span>
                </div>
            </nav>
            
            <div class="user-menu">
                <div style="text-align: right;">
                    <span id="userNameHeader" style="font-weight: 600;"></span>
                    <span id="userPointsHeader" style="font-size: 13px; display: block; color: var(--text-secondary);">
                        0 –æ—á–∫–æ–≤
                    </span>
                </div>
                
                <div style="position: relative;">
                    <div class="user-avatar" id="userAvatar" onclick="Auth.toggleDropdown()">–ê</div>
                    
                    <div id="userDropdown" class="dropdown-menu">
                        <div class="dropdown-item" onclick="App.navigate('profile'); Auth.closeDropdown()">
                            <span>üë§</span>
                            –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
                        </div>
                        <div class="dropdown-item" onclick="App.navigate('settings'); Auth.closeDropdown()">
                            <span>‚öôÔ∏è</span>
                            –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                        </div>
                        <div style="height: 2px; background: var(--border-color); margin: 8px 0;"></div>
                        <div class="dropdown-item" onclick="Auth.logout()">
                            <span>üö™</span>
                            –í—ã–π—Ç–∏
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† -->
    <main id="mainContent" class="container">
        
        <!-- –ì–õ–ê–í–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê -->
        <div id="pageHome" class="page" style="display: block;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 60px; padding: 60px 0; align-items: center;">
                <div>
                    <span class="badge badge-primary" style="margin-bottom: 20px;">
                        üî• –°–µ—Ä–∏—è: <span id="streakDisplay">0</span> –¥–Ω–µ–π
                    </span>
                    
                    <h1 style="font-size: 56px; font-weight: 800; line-height: 1.1; margin-bottom: 24px;">
                        –° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º,<br>
                        <span id="welcomeName" style="background: linear-gradient(135deg, var(--primary-500), var(--primary-600)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                            –î—Ä—É–≥
                        </span>!
                    </h1>
                    
                    <p style="font-size: 18px; color: var(--text-secondary); margin-bottom: 32px;">
                        –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∞–∫–∫–∞—É–Ω—Ç–µ. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è.
                    </p>
                    
                    <button class="btn btn-primary btn-lg" onclick="App.continueLearning()">
                        –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ ‚Üí
                    </button>
                </div>
                
                <div style="display: flex; justify-content: center;">
                    <div style="width: 100%; height: 300px; perspective: 1000px; cursor: pointer;" onclick="this.classList.toggle('flipped')">
                        <div style="position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d;" class="flashcard-inner">
                            <div style="position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 32px; background: var(--bg-card); border: 2px solid var(--border-color); border-radius: 20px;">
                                <span style="font-size: 48px;">ü§î</span>
                                <h3 style="margin-top: 20px;">I ___ a student</h3>
                            </div>
                            <div style="position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 32px; background: linear-gradient(135deg, var(--primary-500), var(--primary-600)); border-radius: 20px; transform: rotateY(180deg);">
                                <span style="font-size: 48px;">‚ú®</span>
                                <h3 style="color: white;">I am a student</h3>
                                <p style="color: rgba(255,255,255,0.9);">am, is, are</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; margin: 40px 0;">
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 24px; text-align: center;">
                    <div style="font-size: 32px; font-weight: 800; color: var(--primary-500);" id="userLevel">1</div>
                    <div style="color: var(--text-secondary);">–£—Ä–æ–≤–µ–Ω—å</div>
                </div>
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 24px; text-align: center;">
                    <div style="font-size: 32px; font-weight: 800; color: var(--primary-500);" id="userPoints">0</div>
                    <div style="color: var(--text-secondary);">–û—á–∫–æ–≤</div>
                </div>
                <div style="background: var(--bg-secondary); border-radius: 16px; padding: 24px; text-align: center;">
                    <div style="font-size: 32px; font-weight: 800; color: var(--primary-500);" id="userCompletedLessons">0</div>
                    <div style="color: var(--text-secondary);">–£—Ä–æ–∫–æ–≤</div>
                </div>
            </div>
            
            <!-- –£–†–û–ö–ò -->
            <div style="margin: 60px 0;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <h2>üìö –ú–æ–∏ —É—Ä–æ–∫–∏</h2>
                    <button class="btn btn-outline" onclick="App.navigate('tests')">
                        –í—Å–µ —Ç–µ—Å—Ç—ã ‚Üí
                    </button>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 24px;">
                    <!-- Verb to be -->
                    <div class="card" style="cursor: pointer;" onclick="App.openLesson('verb-to-be')">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="font-size: 40px;">üî§</span>
                            <span class="badge badge-primary">A1</span>
                        </div>
                        <h3 style="margin: 16px 0 8px;">Verb to be</h3>
                        <p style="color: var(--text-secondary);">am, is, are ‚Ä¢ 12 —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π</p>
                        
                        <div style="margin-top: 20px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="color: var(--text-secondary);">–ü—Ä–æ–≥—Ä–µ—Å—Å</span>
                                <span style="color: var(--primary-500);" id="progressVerbToBe">0%</span>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" id="progressBarVerbToBe" style="width: 0%;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Present Simple -->
                    <div class="card" style="cursor: pointer;" onclick="App.openLesson('present-simple')">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="font-size: 40px;">‚è≥</span>
                            <span class="badge badge-primary">A2</span>
                        </div>
                        <h3 style="margin: 16px 0 8px;">Present Simple</h3>
                        <p style="color: var(--text-secondary);">–ù–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è ‚Ä¢ 15 —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π</p>
                        
                        <div style="margin-top: 20px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="color: var(--text-secondary);">–ü—Ä–æ–≥—Ä–µ—Å—Å</span>
                                <span style="color: var(--primary-500);" id="progressPresentSimple">0%</span>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" id="progressBarPresentSimple" style="width: 0%;"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Past Simple -->
                    <div class="card" style="cursor: pointer;" onclick="App.openLesson('past-simple')">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="font-size: 40px;">üìÖ</span>
                            <span class="badge badge-primary">B1</span>
                        </div>
                        <h3 style="margin: 16px 0 8px;">Past Simple</h3>
                        <p style="color: var(--text-secondary);">–ü—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è ‚Ä¢ 18 —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π</p>
                        
                        <div style="margin-top: 20px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="color: var(--text-secondary);">–ü—Ä–æ–≥—Ä–µ—Å—Å</span>
                                <span style="color: var(--primary-500);" id="progressPastSimple">0%</span>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" id="progressBarPastSimple" style="width: 0%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°–¢–†–ê–ù–ò–¶–ê –£–†–û–ö–ê -->
        <div id="pageLesson" class="page" style="display: none;">
            <div style="margin-bottom: 32px; padding-bottom: 32px; border-bottom: 2px solid var(--border-color);">
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px; color: var(--text-tertiary);">
                    <span onclick="App.navigate('home')" style="cursor: pointer;">–ì–ª–∞–≤–Ω–∞—è</span>
                    <span>/</span>
                    <span>Verb to be</span>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="display: flex; align-items: center; gap: 16px;">
                            <span style="font-size: 48px;">üî§</span>
                            <h1 style="margin: 0;">Verb to be</h1>
                            <span class="badge badge-primary">–ù–∞—á–∞–ª—å–Ω—ã–π</span>
                        </div>
                        <p style="color: var(--text-secondary); margin-top: 12px; max-width: 600px;">
                            –ì–ª–∞–≥–æ–ª to be ‚Äî –æ—Å–Ω–æ–≤–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–π –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏. –ù–∞—É—á–∏—Ç–µ—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å am, is, are.
                        </p>
                    </div>
                    
                    <div style="text-align: center;">
                        <div style="font-size: 36px; color: var(--primary-500);" id="lessonProgressDisplay">0%</div>
                        <span style="color: var(--text-secondary);">–ø—Ä–æ–≥—Ä–µ—Å—Å</span>
                    </div>
                </div>
            </div>
            
            <!-- –¢–ê–ë–´ -->
            <div style="display: flex; gap: 8px; margin-bottom: 32px; overflow-x: auto;">
                <button class="tab active" onclick="App.switchLessonTab('theory')">üìñ –¢–µ–æ—Ä–∏—è</button>
                <button class="tab" onclick="App.switchLessonTab('exercises')">‚úèÔ∏è –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</button>
                <button class="tab" onclick="App.switchLessonTab('flashcards')">üÉè –ö–∞—Ä—Ç–æ—á–∫–∏</button>
                <button class="tab" onclick="App.switchLessonTab('test')">üìù –¢–µ—Å—Ç</button>
            </div>
            
            <!-- –¢–ï–û–†–ò–Ø -->
            <div id="theoryTab" class="tab-content active">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;">
                    <div class="card">
                        <h3 style="display: flex; align-items: center; gap: 8px;">
                            <span style="color: var(--success-500);">‚úÖ</span>
                            –£—Ç–≤–µ—Ä–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞
                        </h3>
                        <div style="margin-top: 20px;">
                            <div style="display: flex; align-items: center; gap: 16px; padding: 12px; background: var(--bg-secondary); border-radius: 12px; margin-bottom: 8px;">
                                <span style="font-weight: 600; min-width: 80px;">I</span>
                                <span style="color: var(--text-secondary);">‚Üí</span>
                                <span style="color: var(--primary-500); font-weight: 700;">am</span>
                                <span style="color: var(--text-tertiary);">('m)</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 16px; padding: 12px; background: var(--bg-secondary); border-radius: 12px; margin-bottom: 8px;">
                                <span style="font-weight: 600; min-width: 80px;">He/She/It</span>
                                <span style="color: var(--text-secondary);">‚Üí</span>
                                <span style="color: var(--primary-500); font-weight: 700;">is</span>
                                <span style="color: var(--text-tertiary);">('s)</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 16px; padding: 12px; background: var(--bg-secondary); border-radius: 12px;">
                                <span style="font-weight: 600; min-width: 80px;">You/We/They</span>
                                <span style="color: var(--text-secondary);">‚Üí</span>
                                <span style="color: var(--primary-500); font-weight: 700;">are</span>
                                <span style="color: var(--text-tertiary);">('re)</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3 style="display: flex; align-items: center; gap: 8px;">
                            <span style="color: var(--error-500);">‚ùå</span>
                            –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞
                        </h3>
                        <div style="margin-top: 20px;">
                            <div style="display: flex; align-items: center; gap: 16px; padding: 12px; background: var(--bg-secondary); border-radius: 12px; margin-bottom: 8px;">
                                <span style="font-weight: 600; min-width: 80px;">I</span>
                                <span style="color: var(--text-secondary);">‚Üí</span>
                                <span style="color: var(--error-500); font-weight: 700;">am not</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 16px; padding: 12px; background: var(--bg-secondary); border-radius: 12px; margin-bottom: 8px;">
                                <span style="font-weight: 600; min-width: 80px;">He/She/It</span>
                                <span style="color: var(--text-secondary);">‚Üí</span>
                                <span style="color: var(--error-500); font-weight: 700;">is not</span>
                                <span style="color: var(--text-tertiary);">(isn't)</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 16px; padding: 12px; background: var(--bg-secondary); border-radius: 12px;">
                                <span style="font-weight: 600; min-width: 80px;">You/We/They</span>
                                <span style="color: var(--text-secondary);">‚Üí</span>
                                <span style="color: var(--error-500); font-weight: 700;">are not</span>
                                <span style="color: var(--text-tertiary);">(aren't)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –£–ü–†–ê–ñ–ù–ï–ù–ò–Ø -->
            <div id="exercisesTab" class="tab-content">
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h3>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1: –í—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ñ–æ—Ä–º—É</h3>
                            <p style="color: var(--text-secondary);">am, is, are</p>
                        </div>
                        <span class="badge badge-primary">10 –±–∞–ª–ª–æ–≤</span>
                    </div>
                    
                    <div style="margin-top: 24px;">
                        <div id="exercise1" class="exercise-item" style="padding: 20px; background: var(--bg-secondary); border-radius: 16px; margin-bottom: 16px; border-left: 6px solid var(--border-color);">
                            <p style="margin-bottom: 12px;">1. I <span></span> a student.</p>
                            <input type="text" id="answer1" class="input" placeholder="am/is/are" style="width: 120px;">
                        </div>
                        
                        <div id="exercise2" class="exercise-item" style="padding: 20px; background: var(--bg-secondary); border-radius: 16px; margin-bottom: 16px; border-left: 6px solid var(--border-color);">
                            <p style="margin-bottom: 12px;">2. She <span></span> a doctor.</p>
                            <input type="text" id="answer2" class="input" placeholder="am/is/are" style="width: 120px;">
                        </div>
                        
                        <div id="exercise3" class="exercise-item" style="padding: 20px; background: var(--bg-secondary); border-radius: 16px; margin-bottom: 16px; border-left: 6px solid var(--border-color);">
                            <p style="margin-bottom: 12px;">3. We <span></span> from Russia.</p>
                            <input type="text" id="answer3" class="input" placeholder="am/is/are" style="width: 120px;">
                        </div>
                        
                        <div id="exercise4" class="exercise-item" style="padding: 20px; background: var(--bg-secondary); border-radius: 16px; margin-bottom: 16px; border-left: 6px solid var(--border-color);">
                            <p style="margin-bottom: 12px;">4. The cat <span></span> sleeping.</p>
                            <input type="text" id="answer4" class="input" placeholder="am/is/are" style="width: 120px;">
                        </div>
                        
                        <div id="exercise5" class="exercise-item" style="padding: 20px; background: var(--bg-secondary); border-radius: 16px; margin-bottom: 16px; border-left: 6px solid var(--border-color);">
                            <p style="margin-bottom: 12px;">5. You and I <span></span> friends.</p>
                            <input type="text" id="answer5" class="input" placeholder="am/is/are" style="width: 120px;">
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 12px; margin-top: 24px;">
                        <button class="btn btn-primary" onclick="Lesson.checkExercises()">
                            ‚úì –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
                        </button>
                        <button class="btn btn-outline" onclick="Lesson.resetExercises()">
                            ‚Ü∫ –°–±—Ä–æ—Å–∏—Ç—å
                        </button>
                    </div>
                    
                    <div id="exerciseResult" style="display: none; margin-top: 24px; padding: 20px; background: var(--bg-secondary); border-radius: 16px;"></div>
                </div>
            </div>
            
            <!-- –ö–ê–†–¢–û–ß–ö–ò -->
            <div id="flashcardsTab" class="tab-content">
                <div style="max-width: 600px; margin: 0 auto;">
                    <div style="width: 100%; height: 300px; perspective: 1000px; cursor: pointer;" id="lessonFlashcard" onclick="Lesson.flipCard()">
                        <div style="position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d;" class="flashcard-inner">
                            <div style="position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 32px; background: var(--bg-card); border: 2px solid var(--border-color); border-radius: 20px;">
                                <span style="font-size: 48px;">üî§</span>
                                <h3 style="margin-top: 20px;">I ___ a student</h3>
                            </div>
                            <div style="position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 32px; background: linear-gradient(135deg, var(--primary-500), var(--primary-600)); border-radius: 20px; transform: rotateY(180deg);">
                                <span style="font-size: 48px;">‚úÖ</span>
                                <h3 style="color: white;">I am a student</h3>
                                <p style="color: rgba(255,255,255,0.9);">–° I –∏—Å–ø–æ–ª—å–∑—É–µ–º am</p>
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: flex; justify-content: center; gap: 16px; margin-top: 24px;">
                        <button class="btn btn-outline" onclick="Lesson.prevCard()">‚Üê</button>
                        <span class="badge" id="cardCounter" style="font-size: 16px; padding: 12px 24px;">1 / 5</span>
                        <button class="btn btn-outline" onclick="Lesson.nextCard()">‚Üí</button>
                        <button class="btn btn-primary" onclick="Lesson.shuffleCards()">üîÑ –ü–µ—Ä–µ–º–µ—à–∞—Ç—å</button>
                    </div>
                </div>
            </div>
            
            <!-- –¢–ï–°–¢ -->
            <div id="testTab" class="tab-content">
                <div class="card" style="text-align: center; padding: 48px;">
                    <span style="font-size: 64px;">üìù</span>
                    <h2 style="margin-top: 24px;">–ò—Ç–æ–≥–æ–≤—ã–π —Ç–µ—Å—Ç: Verb to be</h2>
                    <p style="color: var(--text-secondary);">10 –≤–æ–ø—Ä–æ—Å–æ–≤ ‚Ä¢ 15 –º–∏–Ω—É—Ç ‚Ä¢ 100 –±–∞–ª–ª–æ–≤</p>
                    
                    <div style="margin-top: 32px;">
                        <button class="btn btn-primary btn-lg" onclick="Test.start('verb-to-be')">
                            –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°–¢–†–ê–ù–ò–¶–ê –¢–ï–°–¢–ê -->
        <div id="pageTest" class="page" style="display: none;">
            <div style="margin-bottom: 32px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h2>–¢–µ—Å—Ç: Verb to be</h2>
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="padding: 12px 24px; background: var(--bg-secondary); border-radius: 9999px; font-weight: 600;">
                            ‚è±Ô∏è <span id="testTimer">15:00</span>
                        </div>
                        <span class="badge badge-primary" id="questionCounter">1/10</span>
                    </div>
                </div>
            </div>
            
            <div id="testQuestions" style="margin-bottom: 32px;"></div>
            
            <div style="display: flex; gap: 12px;">
                <button class="btn btn-primary btn-lg" onclick="Test.submit()">
                    –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç
                </button>
                <button class="btn btn-outline" onclick="Test.cancel()">
                    –û—Ç–º–µ–Ω–∞
                </button>
            </div>
            
            <div id="testResult" style="display: none; margin-top: 32px; padding: 32px; background: var(--bg-secondary); border-radius: 20px;"></div>
        </div>
        
        <!-- –°–¢–†–ê–ù–ò–¶–ê –ü–†–û–§–ò–õ–Ø -->
        <div id="pageProfile" class="page" style="display: none;">
            <div style="margin-bottom: 32px;">
                <h2>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 24px; margin-bottom: 40px;">
                <div class="card" style="text-align: center;">
                    <div style="width: 120px; height: 120px; background: linear-gradient(135deg, var(--primary-500), var(--primary-600)); border-radius: 50%; margin: 0 auto; display: flex; align-items: center; justify-content: center;">
                        <span style="font-size: 48px; color: white;" id="profileAvatar">üë§</span>
                    </div>
                    <h3 style="margin: 20px 0 8px;" id="profileName">–ê–ª–µ–∫—Å–∞–Ω–¥—Ä</h3>
                    <p style="color: var(--text-secondary);" id="profileEmail">email@example.com</p>
                    
                    <div style="margin-top: 24px; padding-top: 24px; border-top: 2px solid var(--border-color);">
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-secondary);">–£—Ä–æ–≤–µ–Ω—å:</span>
                            <span style="font-weight: 700;" id="profileLevel">1</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                            <span style="color: var(--text-secondary);">–û—á–∫–∏:</span>
                            <span style="font-weight: 700;" id="profilePoints">0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                            <span style="color: var(--text-secondary);">–°–µ—Ä–∏—è:</span>
                            <span style="font-weight: 700; color: var(--warning-500);" id="profileStreak">0 –¥–Ω–µ–π</span>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —Ç–µ–º–∞–º</h3>
                    <div style="margin-top: 24px;">
                        <div style="margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span>Verb to be</span>
                                <span style="color: var(--primary-500);" id="profileProgressVerbToBe">0%</span>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" id="profileBarVerbToBe" style="width: 0%;"></div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span>Present Simple</span>
                                <span style="color: var(--primary-500);" id="profileProgressPresentSimple">0%</span>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" id="profileBarPresentSimple" style="width: 0%;"></div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span>Past Simple</span>
                                <span style="color: var(--primary-500);" id="profileProgressPastSimple">0%</span>
                            </div>
                            <div class="progress">
                                <div class="progress-bar" id="profileBarPastSimple" style="width: 0%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°–¢–†–ê–ù–ò–¶–ê –ù–ê–°–¢–†–û–ï–ö - –° 8 –¢–ï–ú–ê–ú–ò –û–§–û–†–ú–õ–ï–ù–ò–Ø -->
        <div id="pageSettings" class="page" style="display: none;">
            <div style="margin-bottom: 32px;">
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</h2>
                <p style="color: var(--text-secondary);">–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω—É –∏–∑ 8 –ø—Ä–µ–º–∏—É–º-—Ç–µ–º</p>
            </div>
            
            <div class="card">
                <h3 style="margin-bottom: 24px;">üé® –¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</h3>
                
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 32px;">
                    <!-- –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ -->
                    <div class="theme-option" onclick="Settings.setTheme('light')" id="theme-light">
                        <div style="background: linear-gradient(135deg, #ffffff, #f8fafc); border: 2px solid #e2e8f0; border-radius: 12px; height: 80px; margin-bottom: 8px;"></div>
                        <span style="font-weight: 600;">–°–≤–µ—Ç–ª–∞—è</span>
                    </div>
                    
                    <!-- –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ -->
                    <div class="theme-option" onclick="Settings.setTheme('dark')" id="theme-dark">
                        <div style="background: linear-gradient(135deg, #0f172a, #1e293b); border: 2px solid #334155; border-radius: 12px; height: 80px; margin-bottom: 8px;"></div>
                        <span style="font-weight: 600;">–¢—ë–º–Ω–∞—è</span>
                    </div>
                    
                    <!-- –°–∏–Ω—è—è —Ç–µ–º–∞ -->
                    <div class="theme-option" onclick="Settings.setTheme('blue')" id="theme-blue">
                        <div style="background: linear-gradient(135deg, #eff6ff, #dbeafe); border: 2px solid #93c5fd; border-radius: 12px; height: 80px; margin-bottom: 8px;"></div>
                        <span style="font-weight: 600;">–°–∏–Ω—è—è</span>
                    </div>
                    
                    <!-- –ó–µ–ª—ë–Ω–∞—è —Ç–µ–º–∞ -->
                    <div class="theme-option" onclick="Settings.setTheme('green')" id="theme-green">
                        <div style="background: linear-gradient(135deg, #f0fdf4, #dcfce7); border: 2px solid #86efac; border-radius: 12px; height: 80px; margin-bottom: 8px;"></div>
                        <span style="font-weight: 600;">–ó–µ–ª—ë–Ω–∞—è</span>
                    </div>
                    
                    <!-- –§–∏–æ–ª–µ—Ç–æ–≤–∞—è —Ç–µ–º–∞ -->
                    <div class="theme-option" onclick="Settings.setTheme('purple')" id="theme-purple">
                        <div style="background: linear-gradient(135deg, #faf5ff, #f3e8ff); border: 2px solid #d8b4fe; border-radius: 12px; height: 80px; margin-bottom: 8px;"></div>
                        <span style="font-weight: 600;">–§–∏–æ–ª–µ—Ç–æ–≤–∞—è</span>
                    </div>
                    
                    <!-- –†–æ–∑–æ–≤–∞—è —Ç–µ–º–∞ -->
                    <div class="theme-option" onclick="Settings.setTheme('pink')" id="theme-pink">
                        <div style="background: linear-gradient(135deg, #fdf2f8, #fce7f3); border: 2px solid #f9a8d4; border-radius: 12px; height: 80px; margin-bottom: 8px;"></div>
                        <span style="font-weight: 600;">–†–æ–∑–æ–≤–∞—è</span>
                    </div>
                    
                    <!-- –û—Ä–∞–Ω–∂–µ–≤–∞—è —Ç–µ–º–∞ -->
                    <div class="theme-option" onclick="Settings.setTheme('orange')" id="theme-orange">
                        <div style="background: linear-gradient(135deg, #fff7ed, #ffedd5); border: 2px solid #fdba74; border-radius: 12px; height: 80px; margin-bottom: 8px;"></div>
                        <span style="font-weight: 600;">–û—Ä–∞–Ω–∂–µ–≤–∞—è</span>
                    </div>
                    
                    <!-- –ú—è—Ç–Ω–∞—è —Ç–µ–º–∞ -->
                    <div class="theme-option" onclick="Settings.setTheme('mint')" id="theme-mint">
                        <div style="background: linear-gradient(135deg, #f0fdfa, #ccfbf1); border: 2px solid #5eead4; border-radius: 12px; height: 80px; margin-bottom: 8px;"></div>
                        <span style="font-weight: 600;">–ú—è—Ç–Ω–∞—è</span>
                    </div>
                    
                    <!-- –ö–æ—Ä–∏—á–Ω–µ–≤–∞—è —Ç–µ–º–∞ -->
                    <div class="theme-option" onclick="Settings.setTheme('brown')" id="theme-brown">
                        <div style="background: linear-gradient(135deg, #faf7f2, #e7e2d9); border: 2px solid #c4b5a0; border-radius: 12px; height: 80px; margin-bottom: 8px;"></div>
                        <span style="font-weight: 600;">–ö–æ—Ä–∏—á–Ω–µ–≤–∞—è</span>
                    </div>
                </div>
                
                <div style="margin-top: 24px; padding-top: 24px; border-top: 2px solid var(--border-color);">
                    <div style="display: flex; align-items: center; gap: 16px;">
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="notificationsCheck" checked style="width: 18px; height: 18px;">
                            <span>–í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                        </label>
                        
                        <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                            <input type="checkbox" id="soundCheck" checked style="width: 18px; height: 18px;">
                            <span>–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã</span>
                        </label>
                    </div>
                </div>
                
                <div style="display: flex; gap: 12px; margin-top: 24px;">
                    <button class="btn btn-primary" onclick="Settings.save()">
                        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    </button>
                    <button class="btn btn-outline" onclick="Settings.reset()">
                        –°–±—Ä–æ—Å–∏—Ç—å
                    </button>
                </div>
            </div>
        </div>
    </main>
</div>

<!-- ===============================================
   –ü–ê–ù–ï–õ–¨ –ë–´–°–¢–†–û–ì–û –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –¢–ï–ú
   =============================================== -->
<div class="theme-panel">
    <button class="theme-button" onclick="ThemeQuick.toggle()">
        üé®
    </button>
    
    <div id="themeQuickMenu" class="theme-menu">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
            <h4 style="margin: 0;">–ë—ã—Å—Ç—Ä–∞—è —Å–º–µ–Ω–∞ —Ç–µ–º—ã</h4>
            <button onclick="ThemeQuick.toggle()" style="background: none; border: none; font-size: 20px; cursor: pointer; color: var(--text-secondary);">‚úï</button>
        </div>
        
        <div class="theme-grid">
            <div class="theme-option" onclick="Settings.setTheme('light'); ThemeQuick.toggle()">
                <div class="theme-preview" style="background: linear-gradient(135deg, #ffffff, #f8fafc); border: 2px solid #e2e8f0;"></div>
                <span style="font-size: 14px;">–°–≤–µ—Ç–ª–∞—è</span>
            </div>
            <div class="theme-option" onclick="Settings.setTheme('dark'); ThemeQuick.toggle()">
                <div class="theme-preview" style="background: linear-gradient(135deg, #0f172a, #1e293b); border: 2px solid #334155;"></div>
                <span style="font-size: 14px;">–¢—ë–º–Ω–∞—è</span>
            </div>
            <div class="theme-option" onclick="Settings.setTheme('blue'); ThemeQuick.toggle()">
                <div class="theme-preview" style="background: linear-gradient(135deg, #eff6ff, #dbeafe); border: 2px solid #93c5fd;"></div>
                <span style="font-size: 14px;">–°–∏–Ω—è—è</span>
            </div>
            <div class="theme-option" onclick="Settings.setTheme('green'); ThemeQuick.toggle()">
                <div class="theme-preview" style="background: linear-gradient(135deg, #f0fdf4, #dcfce7); border: 2px solid #86efac;"></div>
                <span style="font-size: 14px;">–ó–µ–ª—ë–Ω–∞—è</span>
            </div>
            <div class="theme-option" onclick="Settings.setTheme('purple'); ThemeQuick.toggle()">
                <div class="theme-preview" style="background: linear-gradient(135deg, #faf5ff, #f3e8ff); border: 2px solid #d8b4fe;"></div>
                <span style="font-size: 14px;">–§–∏–æ–ª–µ—Ç–æ–≤–∞—è</span>
            </div>
            <div class="theme-option" onclick="Settings.setTheme('pink'); ThemeQuick.toggle()">
                <div class="theme-preview" style="background: linear-gradient(135deg, #fdf2f8, #fce7f3); border: 2px solid #f9a8d4;"></div>
                <span style="font-size: 14px;">–†–æ–∑–æ–≤–∞—è</span>
            </div>
            <div class="theme-option" onclick="Settings.setTheme('orange'); ThemeQuick.toggle()">
                <div class="theme-preview" style="background: linear-gradient(135deg, #fff7ed, #ffedd5); border: 2px solid #fdba74;"></div>
                <span style="font-size: 14px;">–û—Ä–∞–Ω–∂–µ–≤–∞—è</span>
            </div>
            <div class="theme-option" onclick="Settings.setTheme('mint'); ThemeQuick.toggle()">
                <div class="theme-preview" style="background: linear-gradient(135deg, #f0fdfa, #ccfbf1); border: 2px solid #5eead4;"></div>
                <span style="font-size: 14px;">–ú—è—Ç–Ω–∞—è</span>
            </div>
        </div>
    </div>
</div>

<script>
    // ====================================================================
    //                     –°–ò–°–¢–ï–ú–ê –ê–ö–ö–ê–£–ù–¢–û–í (Auth)
    // ====================================================================
    
    const Auth = {
        init() {
            if (!localStorage.getItem('users')) {
                localStorage.setItem('users', JSON.stringify([]));
            }
            
            const currentUser = localStorage.getItem('currentUser');
            if (currentUser) {
                const user = JSON.parse(currentUser);
                this.setCurrentUser(user);
                this.showApp();
            } else {
                this.showAuth();
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é —Ç–µ–º—É
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        },

        showAuth() {
            document.getElementById('authScreen').style.display = 'flex';
            document.getElementById('appContainer').style.display = 'none';
        },

        showApp() {
            document.getElementById('authScreen').style.display = 'none';
            document.getElementById('appContainer').style.display = 'block';
            
            const user = JSON.parse(localStorage.getItem('currentUser'));
            if (user) {
                this.updateUserInterface(user);
                App.loadUserData(user);
            }
        },

        showLogin() {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            document.querySelectorAll('.auth-tab')[0].classList.add('active');
            document.getElementById('loginForm').classList.add('active');
        },

        showRegister() {
            document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
            
            document.querySelectorAll('.auth-tab')[1].classList.add('active');
            document.getElementById('registerForm').classList.add('active');
        },

        register(event) {
            event.preventDefault();
            
            const name = document.getElementById('registerName').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const username = document.getElementById('registerUsername').value.trim();
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            if (!name || !email || !username || !password) {
                Notification.show('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!', 'error');
                return;
            }
            
            if (password.length < 6) {
                Notification.show('–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤!', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                Notification.show('–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç!', 'error');
                return;
            }
            
            const users = JSON.parse(localStorage.getItem('users'));
            
            if (users.find(u => u.email === email)) {
                Notification.show('Email —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω!', 'error');
                return;
            }
            
            if (users.find(u => u.username === username)) {
                Notification.show('–õ–æ–≥–∏–Ω —É–∂–µ –∑–∞–Ω—è—Ç!', 'error');
                return;
            }
            
            const hashedPassword = this.hashPassword(password);
            
            const newUser = {
                id: 'user_' + Date.now(),
                name: name,
                email: email,
                username: username,
                password: hashedPassword,
                level: 1,
                points: 0,
                streak: 0,
                completedLessons: [],
                progress: {
                    'verb-to-be': 0,
                    'present-simple': 0,
                    'past-simple': 0
                },
                createdAt: new Date().toISOString(),
                lastLogin: new Date().toISOString(),
                theme: localStorage.getItem('theme') || 'light'
            };
            
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));
            
            const userForSession = { ...newUser };
            delete userForSession.password;
            localStorage.setItem('currentUser', JSON.stringify(userForSession));
            
            Notification.show('–ê–∫–∫–∞—É–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!', 'success');
            this.showApp();
        },

        login(event) {
            event.preventDefault();
            
            const login = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            if (!login || !password) {
                Notification.show('–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω/email –∏ –ø–∞—Ä–æ–ª—å!', 'error');
                return;
            }
            
            const users = JSON.parse(localStorage.getItem('users'));
            const user = users.find(u => u.email === login || u.username === login);
            
            if (!user) {
                Notification.show('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω!', 'error');
                return;
            }
            
            if (user.password !== this.hashPassword(password)) {
                Notification.show('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!', 'error');
                return;
            }
            
            user.lastLogin = new Date().toISOString();
            localStorage.setItem('users', JSON.stringify(users));
            
            const userForSession = { ...user };
            delete userForSession.password;
            localStorage.setItem('currentUser', JSON.stringify(userForSession));
            
            Notification.show('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!', 'success');
            this.showApp();
        },

        logout() {
            localStorage.removeItem('currentUser');
            this.closeDropdown();
            this.showAuth();
            Notification.show('–í—ã –≤—ã—à–ª–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞', 'info');
        },

        hashPassword(password) {
            let hash = 0;
            const salt = 'english_master_2024';
            const salted = password + salt;
            
            for (let i = 0; i < salted.length; i++) {
                const char = salted.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            
            return 'hash_' + Math.abs(hash).toString(36);
        },

        setCurrentUser(user) {
            localStorage.setItem('currentUser', JSON.stringify(user));
            this.updateUserInterface(user);
        },

        updateUserInterface(user) {
            document.getElementById('userNameHeader').textContent = user.name;
            document.getElementById('userPointsHeader').textContent = user.points + ' –æ—á–∫–æ–≤';
            document.getElementById('headerLevelBadge').textContent = `–£—Ä–æ–≤–µ–Ω—å ${user.level}`;
            document.getElementById('userAvatar').textContent = user.name.charAt(0).toUpperCase();
            document.getElementById('welcomeName').textContent = user.name;
            document.getElementById('streakDisplay').textContent = user.streak || 0;
            
            document.getElementById('profileName').textContent = user.name;
            document.getElementById('profileEmail').textContent = user.email;
            document.getElementById('profileLevel').textContent = user.level;
            document.getElementById('profilePoints').textContent = user.points;
            document.getElementById('profileStreak').textContent = (user.streak || 0) + ' –¥–Ω–µ–π';
            document.getElementById('profileAvatar').textContent = user.name.charAt(0).toUpperCase();
        },

        toggleDropdown() {
            document.getElementById('userDropdown').classList.toggle('show');
        },

        closeDropdown() {
            document.getElementById('userDropdown').classList.remove('show');
        }
    };

    // ====================================================================
    //                     –°–ò–°–¢–ï–ú–ê –£–í–ï–î–û–ú–õ–ï–ù–ò–ô
    // ====================================================================
    
    const Notification = {
        show(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 16px 24px;
                background: ${type === 'success' ? '#22c55e' : type === 'error' ? '#ef4444' : '#6366f1'};
                color: white;
                border-radius: 12px;
                font-weight: 500;
                box-shadow: 0 10px 25px rgba(0,0,0,0.1);
                z-index: 9999;
                animation: slideIn 0.3s ease;
            `;
            notification.innerHTML = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
    };

    // ====================================================================
    //                     –£–ü–†–ê–í–õ–ï–ù–ò–ï –¢–ï–ú–ê–ú–ò (Settings)
    // ====================================================================
    
    const Settings = {
        setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é —Ç–µ–º—É –≤ UI
            document.querySelectorAll('.theme-option').forEach(opt => {
                opt.classList.remove('active');
            });
            document.getElementById(`theme-${theme}`)?.classList.add('active');
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–º—É –≤ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const currentUser = localStorage.getItem('currentUser');
            if (currentUser) {
                const user = JSON.parse(currentUser);
                user.theme = theme;
                localStorage.setItem('currentUser', JSON.stringify(user));
                
                const users = JSON.parse(localStorage.getItem('users'));
                const userIndex = users.findIndex(u => u.id === user.id);
                if (userIndex !== -1) {
                    users[userIndex].theme = theme;
                    localStorage.setItem('users', JSON.stringify(users));
                }
            }
            
            Notification.show(`–¢–µ–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞ ${theme}`, 'success');
        },

        save() {
            const notifications = document.getElementById('notificationsCheck').checked;
            const sound = document.getElementById('soundCheck').checked;
            
            localStorage.setItem('notifications', notifications);
            localStorage.setItem('sound', sound);
            
            Notification.show('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã', 'success');
        },

        reset() {
            this.setTheme('light');
            document.getElementById('notificationsCheck').checked = true;
            document.getElementById('soundCheck').checked = true;
            
            localStorage.setItem('notifications', 'true');
            localStorage.setItem('sound', 'true');
            
            Notification.show('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã', 'info');
        },

        load() {
            const theme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', theme);
            
            const notifications = localStorage.getItem('notifications') !== 'false';
            const sound = localStorage.getItem('sound') !== 'false';
            
            document.getElementById('notificationsCheck').checked = notifications;
            document.getElementById('soundCheck').checked = sound;
            
            // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—É—é —Ç–µ–º—É
            document.querySelectorAll('.theme-option').forEach(opt => {
                opt.classList.remove('active');
            });
            document.getElementById(`theme-${theme}`)?.classList.add('active');
        }
    };

    // ====================================================================
    //                     –ë–´–°–¢–†–û–ï –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –¢–ï–ú
    // ====================================================================
    
    const ThemeQuick = {
        toggle() {
            document.getElementById('themeQuickMenu').classList.toggle('show');
        }
    };

    // ====================================================================
    //                     –û–°–ù–û–í–ù–û–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–ï (App)
    // ====================================================================
    
    const App = {
        currentUser: null,

        loadUserData(user) {
            this.currentUser = user;
            
            if (user.progress) {
                const progress = user.progress;
                
                document.getElementById('progressVerbToBe').textContent = progress['verb-to-be'] + '%';
                document.getElementById('progressBarVerbToBe').style.width = progress['verb-to-be'] + '%';
                document.getElementById('profileProgressVerbToBe').textContent = progress['verb-to-be'] + '%';
                document.getElementById('profileBarVerbToBe').style.width = progress['verb-to-be'] + '%';
                
                document.getElementById('progressPresentSimple').textContent = progress['present-simple'] + '%';
                document.getElementById('progressBarPresentSimple').style.width = progress['present-simple'] + '%';
                document.getElementById('profileProgressPresentSimple').textContent = progress['present-simple'] + '%';
                document.getElementById('profileBarPresentSimple').style.width = progress['present-simple'] + '%';
                
                document.getElementById('progressPastSimple').textContent = progress['past-simple'] + '%';
                document.getElementById('progressBarPastSimple').style.width = progress['past-simple'] + '%';
                document.getElementById('profileProgressPastSimple').textContent = progress['past-simple'] + '%';
                document.getElementById('profileBarPastSimple').style.width = progress['past-simple'] + '%';
            }
            
            document.getElementById('userLevel').textContent = user.level;
            document.getElementById('userPoints').textContent = user.points;
            document.getElementById('userCompletedLessons').textContent = user.completedLessons?.length || 0;
        },

        navigate(page) {
            document.getElementById('pageHome').style.display = 'none';
            document.getElementById('pageLesson').style.display = 'none';
            document.getElementById('pageTest').style.display = 'none';
            document.getElementById('pageProfile').style.display = 'none';
            document.getElementById('pageSettings').style.display = 'none';
            
            switch(page) {
                case 'home':
                    document.getElementById('pageHome').style.display = 'block';
                    break;
                case 'lesson':
                    document.getElementById('pageLesson').style.display = 'block';
                    break;
                case 'tests':
                    document.getElementById('pageHome').style.display = 'block';
                    break;
                case 'profile':
                    document.getElementById('pageProfile').style.display = 'block';
                    break;
                case 'settings':
                    document.getElementById('pageSettings').style.display = 'block';
                    Settings.load();
                    break;
            }
            
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelectorAll('.nav-link')[page === 'home' ? 0 : page === 'tests' ? 1 : page === 'cards' ? 2 : 3].classList.add('active');
        },

        openLesson(lessonId) {
            this.navigate('lesson');
            Lesson.resetExercises();
            
            if (this.currentUser?.progress) {
                const progress = this.currentUser.progress[lessonId] || 0;
                document.getElementById('lessonProgressDisplay').textContent = progress + '%';
            }
        },

        continueLearning() {
            const progress = this.currentUser?.progress || {};
            let minLesson = 'verb-to-be';
            let minProgress = 100;
            
            for (const [lesson, prog] of Object.entries(progress)) {
                if (prog < minProgress) {
                    minProgress = prog;
                    minLesson = lesson;
                }
            }
            
            this.openLesson(minLesson);
        },

        switchLessonTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tab + 'Tab').classList.add('active');
        }
    };

    // ====================================================================
    //                     –£–†–û–ö–ò –ò –£–ü–†–ê–ñ–ù–ï–ù–ò–Ø (Lesson)
    // ====================================================================
    
    const Lesson = {
        answers: new Map([
            ['ex1', 'am'],
            ['ex2', 'is'],
            ['ex3', 'are'],
            ['ex4', 'is'],
            ['ex5', 'are']
        ]),

        cards: [
            { front: 'I ___ a student', back: 'I am a student', hint: '–° I –∏—Å–ø–æ–ª—å–∑—É–µ–º am' },
            { front: 'She ___ a doctor', back: 'She is a doctor', hint: '–° she –∏—Å–ø–æ–ª—å–∑—É–µ–º is' },
            { front: 'We ___ friends', back: 'We are friends', hint: '–° we –∏—Å–ø–æ–ª—å–∑—É–µ–º are' },
            { front: 'The cat ___ sleeping', back: 'The cat is sleeping', hint: '–° it –∏—Å–ø–æ–ª—å–∑—É–µ–º is' },
            { front: 'You and I ___ friends', back: 'You and I are friends', hint: '–° we –∏—Å–ø–æ–ª—å–∑—É–µ–º are' }
        ],

        currentCardIndex: 0,

        checkExercises() {
            let correct = 0;
            
            for (let i = 1; i <= 5; i++) {
                const input = document.getElementById('answer' + i);
                const exercise = document.getElementById('exercise' + i);
                const answer = input.value.trim().toLowerCase();
                const correctAnswer = this.answers.get('ex' + i);
                
                if (answer === correctAnswer) {
                    correct++;
                    exercise.style.borderLeftColor = '#22c55e';
                    exercise.style.background = 'linear-gradient(90deg, rgba(34,197,94,0.1), transparent)';
                } else {
                    exercise.style.borderLeftColor = '#ef4444';
                    exercise.style.background = 'linear-gradient(90deg, rgba(239,68,68,0.1), transparent)';
                }
            }
            
            const percentage = Math.round((correct / 5) * 100);
            
            const resultDiv = document.getElementById('exerciseResult');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 style="color: #22c55e;">–†–µ–∑—É–ª—å—Ç–∞—Ç: ${correct}/5</h3>
                        <p style="color: var(--text-secondary);">${percentage}% –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤</p>
                    </div>
                    <div style="font-size: 32px; font-weight: 800; color: var(--primary-500);">${percentage}%</div>
                </div>
                <div class="progress" style="margin-top: 16px;">
                    <div class="progress-bar" style="width: ${percentage}%;"></div>
                </div>
            `;
            
            if (percentage > 0) {
                this.saveProgress(percentage);
            }
            
            Notification.show(`–ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${correct}/5`, correct === 5 ? 'success' : 'info');
        },

        resetExercises() {
            for (let i = 1; i <= 5; i++) {
                const input = document.getElementById('answer' + i);
                const exercise = document.getElementById('exercise' + i);
                
                if (input) input.value = '';
                if (exercise) {
                    exercise.style.borderLeftColor = '';
                    exercise.style.background = '';
                }
            }
            
            document.getElementById('exerciseResult').style.display = 'none';
        },

        saveProgress(percentage) {
            const user = JSON.parse(localStorage.getItem('currentUser'));
            if (!user) return;
            
            const users = JSON.parse(localStorage.getItem('users'));
            const userIndex = users.findIndex(u => u.id === user.id);
            
            if (userIndex !== -1) {
                users[userIndex].progress['verb-to-be'] = Math.max(
                    users[userIndex].progress['verb-to-be'] || 0,
                    percentage
                );
                
                users[userIndex].points += 10;
                
                localStorage.setItem('users', JSON.stringify(users));
                
                const updatedUser = { ...users[userIndex] };
                delete updatedUser.password;
                localStorage.setItem('currentUser', JSON.stringify(updatedUser));
                
                Auth.updateUserInterface(updatedUser);
                App.loadUserData(updatedUser);
            }
        },

        flipCard() {
            document.getElementById('lessonFlashcard').querySelector('.flashcard-inner').style.transform = 
                document.getElementById('lessonFlashcard').classList.contains('flipped') 
                    ? 'rotateY(0deg)' 
                    : 'rotateY(180deg)';
            document.getElementById('lessonFlashcard').classList.toggle('flipped');
        },

        nextCard() {
            this.currentCardIndex = (this.currentCardIndex + 1) % this.cards.length;
            this.updateCard();
        },

        prevCard() {
            this.currentCardIndex = (this.currentCardIndex - 1 + this.cards.length) % this.cards.length;
            this.updateCard();
        },

        shuffleCards() {
            for (let i = this.cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [this.cards[i], this.cards[j]] = [this.cards[j], this.cards[i]];
            }
            this.currentCardIndex = 0;
            this.updateCard();
            Notification.show('–ö–∞—Ä—Ç–æ—á–∫–∏ –ø–µ—Ä–µ–º–µ—à–∞–Ω—ã', 'info');
        },

        updateCard() {
            const card = this.cards[this.currentCardIndex];
            const flashcard = document.getElementById('lessonFlashcard');
            
            flashcard.classList.remove('flipped');
            flashcard.querySelector('.flashcard-inner').style.transform = 'rotateY(0deg)';
            
            flashcard.querySelector('.flashcard-front').innerHTML = `
                <span style="font-size: 48px;">üî§</span>
                <h3 style="margin-top: 20px;">${card.front}</h3>
            `;
            
            flashcard.querySelector('.flashcard-back').innerHTML = `
                <span style="font-size: 48px;">‚úÖ</span>
                <h3 style="color: white;">${card.back}</h3>
                <p style="color: rgba(255,255,255,0.9);">${card.hint}</p>
            `;
            
            document.getElementById('cardCounter').textContent = 
                `${this.currentCardIndex + 1} / ${this.cards.length}`;
        }
    };

    // ====================================================================
    //                     –¢–ï–°–¢–´ (Test) - –ó–ê–©–ò–©–Å–ù–ù–´–ï –û–¢–í–ï–¢–´
    // ====================================================================
    
    const Test = {
        questions: [
            { id: 1, text: 'Hello, what _____ your name?', options: ['is', 'are', 'am', 'be'], correct: 'is' },
            { id: 2, text: '_____ name is John.', options: ['My', 'I', 'Me', 'Mine'], correct: 'My' },
            { id: 3, text: 'She _____ a teacher.', options: ['is', 'are', 'am', 'be'], correct: 'is' },
            { id: 4, text: 'Where _____ you from?', options: ['is', 'are', 'am', 'be'], correct: 'are' },
            { id: 5, text: 'I _____ a student.', options: ['is', 'are', 'am', 'be'], correct: 'am' },
            { id: 6, text: 'They _____ from London.', options: ['is', 'are', 'am', 'be'], correct: 'are' },
            { id: 7, text: 'The cat _____ sleeping.', options: ['is', 'are', 'am', 'be'], correct: 'is' },
            { id: 8, text: 'We _____ friends.', options: ['is', 'are', 'am', 'be'], correct: 'are' },
            { id: 9, text: 'He _____ at home.', options: ['is', 'are', 'am', 'be'], correct: 'is' },
            { id: 10, text: 'You _____ a good student.', options: ['is', 'are', 'am', 'be'], correct: 'are' }
        ],

        timer: null,
        timeLeft: 900,
        answers: {},

        start(topic) {
            App.navigate('test');
            this.answers = {};
            this.timeLeft = 900;
            this.renderQuestions();
            this.startTimer();
        },

        renderQuestions() {
            const container = document.getElementById('testQuestions');
            let html = '';
            
            this.questions.forEach((q, index) => {
                html += `
                    <div class="card" style="margin-bottom: 20px;">
                        <p style="font-weight: 600; margin-bottom: 16px;">
                            ${index + 1}. ${q.text}
                        </p>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                            ${q.options.map(opt => `
                                <label style="display: flex; align-items: center; gap: 8px; padding: 12px; background: var(--bg-secondary); border-radius: 12px; cursor: pointer;">
                                    <input type="radio" name="q${q.id}" value="${opt}" style="width: 18px; height: 18px;">
                                    <span>${opt}</span>
                                </label>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
            document.getElementById('questionCounter').textContent = `1/${this.questions.length}`;
        },

        startTimer() {
            if (this.timer) clearInterval(this.timer);
            
            this.timer = setInterval(() => {
                this.timeLeft--;
                
                const mins = Math.floor(this.timeLeft / 60);
                const secs = this.timeLeft % 60;
                document.getElementById('testTimer').textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
                
                if (this.timeLeft <= 0) {
                    this.submit();
                }
            }, 1000);
        },

        submit() {
            clearInterval(this.timer);
            
            let correct = 0;
            
            this.questions.forEach(q => {
                const selected = document.querySelector(`input[name="q${q.id}"]:checked`);
                const answer = selected ? selected.value : null;
                
                if (answer === q.correct) {
                    correct++;
                }
            });
            
            const percentage = Math.round((correct / this.questions.length) * 100);
            
            const resultDiv = document.getElementById('testResult');
            resultDiv.style.display = 'block';
            
            let message = '';
            if (percentage >= 90) message = '–û—Ç–ª–∏—á–Ω–æ! –¢–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å–≤–æ–µ–Ω–∞!';
            else if (percentage >= 75) message = '–•–æ—Ä–æ—à–æ! –ï—Å—Ç—å –Ω–µ–±–æ–ª—å—à–∏–µ –ø—Ä–æ–±–µ–ª—ã.';
            else if (percentage >= 60) message = '–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Ç–µ–æ—Ä–∏—é.';
            else message = '–ù—É–∂–Ω–æ –±–æ–ª—å—à–µ –ø—Ä–∞–∫—Ç–∏–∫–∏! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.';
            
            resultDiv.innerHTML = `
                <div style="text-align: center; margin-bottom: 24px;">
                    <span style="font-size: 48px;">${percentage >= 60 ? 'üéâ' : 'üí™'}</span>
                    <h2 style="margin-top: 16px;">${percentage}%</h2>
                    <p style="color: var(--text-secondary);">${message}</p>
                </div>
                <div style="display: flex; justify-content: center; gap: 40px;">
                    <div style="text-align: center;">
                        <div style="font-size: 32px; font-weight: 800; color: #22c55e;">${correct}</div>
                        <div style="color: var(--text-secondary);">–ü—Ä–∞–≤–∏–ª—å–Ω–æ</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 32px; font-weight: 800; color: #ef4444;">${this.questions.length - correct}</div>
                        <div style="color: var(--text-secondary);">–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ</div>
                    </div>
                </div>
            `;
            
            this.saveResult(percentage);
            
            Notification.show(`–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à—ë–Ω! –†–µ–∑—É–ª—å—Ç–∞—Ç: ${percentage}%`, percentage >= 60 ? 'success' : 'info');
        },

        saveResult(percentage) {
            const user = JSON.parse(localStorage.getItem('currentUser'));
            if (!user) return;
            
            const users = JSON.parse(localStorage.getItem('users'));
            const userIndex = users.findIndex(u => u.id === user.id);
            
            if (userIndex !== -1) {
                users[userIndex].progress['verb-to-be'] = Math.max(
                    users[userIndex].progress['verb-to-be'] || 0,
                    percentage
                );
                
                users[userIndex].points += 50;
                users[userIndex].completedLessons = users[userIndex].completedLessons || [];
                if (!users[userIndex].completedLessons.includes('verb-to-be')) {
                    users[userIndex].completedLessons.push('verb-to-be');
                }
                
                users[userIndex].streak = (users[userIndex].streak || 0) + 1;
                
                localStorage.setItem('users', JSON.stringify(users));
                
                const updatedUser = { ...users[userIndex] };
                delete updatedUser.password;
                localStorage.setItem('currentUser', JSON.stringify(updatedUser));
                
                Auth.updateUserInterface(updatedUser);
                App.loadUserData(updatedUser);
            }
        },

        cancel() {
            clearInterval(this.timer);
            App.navigate('lesson');
        }
    };

    // ====================================================================
    //                     –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
    // ====================================================================

    document.addEventListener('DOMContentLoaded', () => {
        // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            .flashcard .flashcard-inner {
                transition: transform 0.6s;
            }
            .flashcard.flipped .flashcard-inner {
                transform: rotateY(180deg);
            }
            .tab.active {
                background: var(--primary-500);
                color: white;
            }
            .theme-option.active {
                border: 3px solid var(--primary-500);
                transform: scale(0.98);
            }
        `;
        document.head.appendChild(style);
        
        Auth.init();
        
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.user-menu')) {
                document.getElementById('userDropdown')?.classList.remove('show');
            }
            if (!e.target.closest('.theme-panel')) {
                document.getElementById('themeQuickMenu')?.classList.remove('show');
            }
        });
    });
</script>


</body>
</html>
